<!DOCTYPE html>
<html lang="ca" id="html-root">
  <head id="head">
    <meta charset="UTF-8" id="meta-charset" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" id="meta-viewport" />
    <title id="title">Reformes Digitals</title>
    <link rel="stylesheet" href="styles/reset.css" id="link-reset"/>
    <link rel="stylesheet" href="styles/styles.css" id="link-styles"/>
    <link rel="stylesheet" href="styles/style-responsive.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon.png">
    <link rel="shortcut icon" href="img/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon.png">
    <meta name="theme-color" content="#00c2ff"> <!-- color de la empresa -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  </head>
  <body id="body">

    <!-- NAV BAR -->
    <header id="header">
      <nav id="nav" class="container">
        <!-- Logo -->
        <a id="nav-logo-link" href="index.html">
          <img id="nav-logo" src="img/RDBlack.png" alt="Reformes Digitals Logo" />
        </a>

        <!-- Menú de navegación -->
        <ul id="nav-menu">
          <li><a href="#about">Què fem?</a></li>
          <li><a href="#process">Com ho fem?</a></li>
          <li><a href="#footer">Fem-ho!</a></li>

          <!-- Desplegable de Idioma -->
          <li id="nav-item-idioma" class="dropdown">
            <a href="#" id="nav-link-idioma">Idioma</a>
            <ul class="dropdown-menu">
              <li><a href="index-cast.html">Cast</a></li>
              <li><a href="index.html">Cat</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </header>  

    <!-- HERO -->
    <section id="hero">
      <div class="container">
        <!-- Vídeo de fondo optimizado con fallback -->
        <video
          id="hero-video"
          autoplay
          muted
          loop
          playsinline
          preload="auto"
          poster="img/hero-poster.jpg"
        >
          <source src="img/hero-gradient.webm" type="video/webm" />
          <source src="img/hero-gradient.mp4"  type="video/mp4" />
          <!-- Fallback para navegadores sin <video> -->
          <img src="img/hero-poster.jpg" alt="Fons animat" />
        </video>

        <!-- Contenido sobre el vídeo -->
        <div id="hero-content" class="container">
          <h1 id="hero-title">Webs funcionals i específiques pel teu negoci</h1>
          <p id="hero-description">
            Dissenyem, refem o optimitzem la teva web amb claredat, proximitat i preus assequibles.
            Perquè tinguis una presència digital que et representi i que funcioni.
          </p>
        </div>
      </div> <!-- <- faltava tancar aquest div -->
    </section>

    <!-- ABOUT -->
    <section id="about">
      <div class="container">
        <!-- Caja gris -->
        <div class="about-box">
          <!-- Título -->
          <h2 id="about-title">Consultoria Digital</h2>

          <!-- Descripción -->
          <p id="about-description">
            Et donem suport real i pràctic per fer créixer el teu negoci des del món digital:
          </p>

          <!-- Servicios -->
          <ul class="about-services">
            <li>Identitat gràfica i digital</li>
            <li>Programació i Disseny web personalitzat</li>
            <li>Visibilitat, SEO, SEM, GEO, campanyes i automatitzacions</li>
            <li>Xarxes Socials</li>
            <li>E-commerce</li>
            <li>Anàlisi i optimització de resultats</li>
            <li>Mentoria i formació digital personalitzada</li>
            <li>Control de la productivitat a la teva empresa</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- PROCESS -->
    <section id="process" class="section-light">
      <div class="container">
        <h1 class="section-title">Un procés senzill<br>Un resultat que té sentit</h1>
        <p class="section-description">
          Fer la web del teu negoci no hauria de ser complicat. Aquest és el nostre mètode:
        </p>

        <div class="process-grid">
          <!-- Card 1 -->
          <div class="process-card step-1">
            <span class="process-number">01.</span>
            <p><strong>Reunió inicial:</strong><br>Coneixem a fons el teu negoci i el que vols aconseguir amb la web.</p>
          </div>

          <!-- Card 2 -->
          <div class="process-card step-2">
            <span class="process-number">02.</span>
            <p><strong>Proposta de disseny:</strong><br>Et presentem una proposta visual que reflecteixi la teva identitat.</p>
          </div>

          <!-- Card 3 -->
          <div class="process-card step-3">
            <span class="process-number">03.</span>
            <p><strong>Validació:</strong><br>Escoltem el teu feedback i ajustem el disseny segons calgui.</p>
          </div>

          <!-- Card 4 -->
          <div class="process-card step-4">
            <span class="process-number">04.</span>
            <p><strong>Programació:</strong><br>Convertim el disseny en una web funcional, optimitzada i adaptada.</p>
          </div>

          <!-- Card 5 -->
          <div class="process-card step-5">
            <span class="process-number">05.</span>
            <p><strong>Revisió final:</strong><br>Verifiquem disseny, contingut, navegació, idiomes i funcionalitats.</p>
          </div>

          <!-- Card 6 -->
          <div class="process-card step-6">
            <span class="process-number">06.</span>
            <p><strong>Entrega:</strong><br>Publiquem la web a la xarxa, facilitem els accessos i la formació bàsica.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- TEAM -->
    <section id="team" class="section-light">
      <div class="container">
        <h1 class="section-title">El nostre equip</h1>

          <div class="team-grid">
            <!-- Tarjeta 1 -->
            <div class="team-card">
              <div class="team-front">
                <img src="img/Perfil-Marc.png" alt="Marc Duran" class="team-photo">
                <h3 class="team-name">Marc Duran Llauger</h3>
              </div>
              <div class="team-back">
                <h3 class="team-name">Marc Duran Llauger</h3>
                <p>Mirada estratègica orientada a resultats. És qui s'encarrega que la teva web no només es vegi bé, sinó que funcioni.</p>
                <ul>
                  <li>Màster en Màrqueting Digital per ESIC.</li>
                  <li>Més de 8 anys d'experiència en el sector digital.</li>
                  <li>SEO, SEM i copywriting.</li>
                </ul>
              </div>
            </div>


            <!-- Tarjeta 2 -->
            <div class="team-card">
              <div class="team-front">
                <img src="img/foto perfil.JPG" alt="Javier Ribas Pascual" class="team-photo">
                <h3 class="team-name">Javi Ribas Pascual</h3>
              </div>
              <div class="team-back">
                <h3 class="team-name">Javi Ribas Pascual</h3>
                <p>Creativitat enfocada en crear i millorar productes digitals. Responsable de dissenyar i desenvolupar webs, softwares i aplicacions.</p>
                <ul>
                  <li>Programador (Especialista en JS, Node.JS, html i css).</li>
                  <li>Màster en UX/UI per Neoland.</li>
                  <li>Advocat per la UOC.</li>
                </ul>
              </div>
            </div>
          </div>
        </section>
      </div>
    </section>

    <!-- FOOTER -->
    <footer id="footer">
      <div class="container">
        <!-- Vídeo de fons reutilitzat (mateixos assets que el HERO) -->
        <video
          id="footer-video"
          autoplay
          muted
          loop
          playsinline
          preload="auto"
          poster="img/hero-poster.jpg"
        >
          <source src="img/hero-gradient.webm" type="video/webm" />
          <source src="img/hero-gradient.mp4"  type="video/mp4" />
          <img src="img/hero-poster.jpg" alt="Fons animat" />
        </video>

        <!-- Contingut superposat -->
        <div id="footer-content" class="container">
          <h1 id="footer-title">Encara tens dubtes?</h1>

          <p id="footer-contact">
            Truca'ns al <strong>662 58 71 79</strong><br />
            Escriu-nos directament al <strong>WhatsApp</strong><br />
            Envia'ns un correu a <strong>reformesdigitals@gmail.com</strong>
          </p>

          <a id="footer-left" href="cookies.html">Avís legal i Política de cookies</a>
          <p id="footer-right">Reformes Digitals © 2025</p>
        </div>
      </div>
    </footer>

  </body>

 <script>
(async () => {
  const isCA = true; // en index.html
  const base = isCA ? '/content/home/ca' : '/content/home/es';

  async function loadText(path) {
    const res = await fetch(path, { cache: 'no-store' });
    return res.ok ? res.text() : '';
  }

  // NAV
  try {
    const navFM = await loadText(`${base}/nav.md`);
    // Extrae front matter muy simple (logo + links). Si prefieres, deja el nav fijo y omite esto.
    const fmMatch = navFM.match(/^---\n([\s\S]*?)\n---/);
    let logo = 'img/RDBlack.png', links = [];
    if (fmMatch) {
      const yml = fmMatch[1];
      const logoM = yml.match(/logo:\s*(.+)/);
      if (logoM) logo = logoM[1].trim().replace(/^"|"$/g, '');
      const linksArr = [...yml.matchAll(/-\s*{\s*label:\s*"(.*?)",\s*href:\s*"(.*?)"\s*}/g)];
      links = linksArr.map(m => ({ label: m[1], href: m[2] }));
    }
    const navLogo = document.getElementById('nav-logo');
    if (navLogo) navLogo.src = `/src/${logo.replace(/^\.?\//,'')}`;
    const navMenu = document.getElementById('nav-menu');
    if (navMenu && links.length) {
      // conserva el dropdown de idioma (último <li>), reemplaza los 3 primeros
      const dropdown = document.getElementById('nav-item-idioma');
      navMenu.innerHTML = '';
      links.forEach(l => {
        const li = document.createElement('li');
        const a  = document.createElement('a');
        a.href = l.href; a.textContent = l.label;
        li.appendChild(a); navMenu.appendChild(li);
      });
      if (dropdown) navMenu.appendChild(dropdown);
    }
  } catch(e) { console.warn('NAV MD load error', e); }

  // HERO
  {
    const md = await loadText(`${base}/hero.md`);
    const lines = md.split('\n');
    const h1 = lines.find(l => l.startsWith('# '));
    const body = md.replace(/^# .*\n?/, '');
    const titleEl = document.getElementById('hero-title');
    const descEl  = document.getElementById('hero-description');
    if (titleEl && h1) titleEl.textContent = h1.replace(/^#\s*/, '');
    if (descEl) descEl.innerHTML = marked.parse(body);
  }

  // ABOUT
  {
    const md = await loadText(`${base}/about.md`);
    const html = marked.parse(md);
    // Inserta el título y la lista dentro de .about-box
    const aboutBox = document.querySelector('#about .about-box');
    if (aboutBox) aboutBox.innerHTML = html;
  }

  // PROCESS
  {
    const md = await loadText(`${base}/process.md`);
    // title (puede llevar <br>), descripción y lista de pasos
    const container = document.querySelector('#process .container');
    if (container) {
      // parse markdown a HTML y empótalo respetando tu estructura
      const html = marked.parse(md);
      // simple: reemplaza el bloque central del proceso por el HTML del MD
      const title = container.querySelector('.section-title');
      const desc  = container.querySelector('.section-description');
      const grid  = container.querySelector('.process-grid');
      if (title) title.remove();
      if (desc)  desc.remove();
      if (grid)  grid.remove();

      const wrapper = document.createElement('div');
      wrapper.innerHTML = html;
      container.appendChild(wrapper);
    }
  }

  // TEAM (dos fichas)
  async function loadMember(slug, targetIndexes = [0,1]) {
    const md = await loadText(`${base}/team/${slug}.md`);
    if (!md) return;
    const fm = md.match(/^---\n([\s\S]*?)\n---/);
    let name = '', photo = '';
    let body = md;
    if (fm) {
      const yml = fm[1];
      const nameM  = yml.match(/name:\s*"(.*)"/);
      const photoM = yml.match(/photo:\s*"(.*)"/);
      if (nameM)  name  = nameM[1];
      if (photoM) photo = '/src/' + photoM[1].replace(/^\.?\//,'');
      body = md.replace(/^---[\s\S]*?---\n?/, '');
    }
    const htmlBody = marked.parse(body);

    // busca las tarjetas existentes y rellénalas por índice
    const cards = document.querySelectorAll('#team .team-card');
    const idx = slug === 'marc' ? targetIndexes[0] : targetIndexes[1];
    const card = cards[idx];
    if (!card) return;

    const frontImg = card.querySelector('.team-front img.team-photo');
    const frontName= card.querySelector('.team-front .team-name');
    const backName = card.querySelector('.team-back  .team-name');
    const backBox  = card.querySelector('.team-back');

    if (frontImg && photo) frontImg.src = photo;
    if (frontName && name) frontName.textContent = name;
    if (backName && name)  backName.textContent  = name;

    // sustituye la bio y bullets
    if (backBox) {
      // borra p + ul antiguos y mete el markdown
      const p = backBox.querySelector('p'); if (p) p.remove();
      const ul= backBox.querySelector('ul'); if (ul) ul.remove();
      const div = document.createElement('div');
      div.innerHTML = htmlBody;
      backBox.appendChild(div);
    }
  }
  await loadMember('marc',   [0,1]);
  await loadMember('javier', [1,0]);

  // FOOTER
  {
    const md = await loadText(`${base}/footer.md`);
    const html = marked.parse(md);
    const footerBox = document.getElementById('footer-content');
    if (footerBox) footerBox.innerHTML = html;
  }
})();
</script>



</html>
