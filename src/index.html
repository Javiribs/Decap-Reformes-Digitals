<!DOCTYPE html>
<html lang="ca" id="html-root">
  <head id="head">
    <meta charset="UTF-8" id="meta-charset" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" id="meta-viewport" />
    <title id="title">Reformes Digitals</title>
    <link rel="stylesheet" href="styles/reset.css" id="link-reset"/>
    <link rel="stylesheet" href="styles/styles.css" id="link-styles"/>
    <link rel="stylesheet" href="styles/style-responsive.css">
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon.png">
    <link rel="shortcut icon" href="img/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicon.png">
    <meta name="theme-color" content="#00c2ff"> <!-- color de la empresa -->
  </head>
  <body id="body">

    <!-- NAV BAR -->
    <header id="header">
      <nav id="nav" class="container">
        <!-- Logo -->
        <a id="nav-logo-link" href="index.html">
          <img id="nav-logo" src="img/RDBlack.png" alt="Reformes Digitals Logo" />
        </a>

        <!-- Menú de navegación -->
        <ul id="nav-menu">
          <li><a href="#about">Què fem?</a></li>
          <li><a href="#process">Com ho fem?</a></li>
          <li><a href="#footer">Fem-ho!</a></li>

          <!-- Desplegable de Idioma -->
          <li id="nav-item-idioma" class="dropdown">
            <a href="#" id="nav-link-idioma">Idioma</a>
            <ul class="dropdown-menu">
              <li><a href="index-cast.html">Cast</a></li>
              <li><a href="index.html">Cat</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </header>  

    <!-- HERO -->
    <section id="hero">
      <div class="container">
        <!-- Vídeo de fondo optimizado con fallback -->
        <video
          id="hero-video"
          autoplay
          muted
          loop
          playsinline
          preload="auto"
          poster="img/hero-poster.jpg"
        >
          <source src="img/hero-gradient.webm" type="video/webm" />
          <source src="img/hero-gradient.mp4"  type="video/mp4" />
          <!-- Fallback para navegadores sin <video> -->
          <img src="img/hero-poster.jpg" alt="Fons animat" />
        </video>

        <!-- Contenido sobre el vídeo -->
        <div id="hero-content" class="container">
          <h1 id="hero-title">Webs funcionals i específiques pel teu negoci</h1>
          <p id="hero-description">
            Dissenyem, refem o optimitzem la teva web amb claredat, proximitat i preus assequibles.
            Perquè tinguis una presència digital que et representi i que funcioni.
          </p>
        </div>
      </div> <!-- <- faltava tancar aquest div -->
    </section>

    <!-- ABOUT -->
    <section id="about">
      <div class="container">
        <!-- Caja gris -->
        <div class="about-box">
          <!-- Título -->
          <h2 id="about-title">Consultoria Digital</h2>

          <!-- Descripción -->
          <p id="about-description">
            Et donem suport real i pràctic per fer créixer el teu negoci des del món digital:
          </p>

          <!-- Servicios -->
          <ul class="about-services">
            <li>Identitat gràfica i digital</li>
            <li>Programació i Disseny web personalitzat</li>
            <li>Visibilitat, SEO, SEM, GEO, campanyes i automatitzacions</li>
            <li>Xarxes Socials</li>
            <li>E-commerce</li>
            <li>Anàlisi i optimització de resultats</li>
            <li>Mentoria i formació digital personalitzada</li>
            <li>Control de la productivitat a la teva empresa</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- PROCESS -->
    <section id="process" class="section-light">
      <div class="container">
        <h1 class="section-title">Un procés senzill<br>Un resultat que té sentit</h1>
        <p class="section-description">
          Fer la web del teu negoci no hauria de ser complicat. Aquest és el nostre mètode:
        </p>

        <div class="process-grid">
          <!-- Card 1 -->
          <div class="process-card step-1">
            <span class="process-number">01.</span>
            <p><strong>Reunió inicial:</strong><br>Coneixem a fons el teu negoci i el que vols aconseguir amb la web.</p>
          </div>

          <!-- Card 2 -->
          <div class="process-card step-2">
            <span class="process-number">02.</span>
            <p><strong>Proposta de disseny:</strong><br>Et presentem una proposta visual que reflecteixi la teva identitat.</p>
          </div>

          <!-- Card 3 -->
          <div class="process-card step-3">
            <span class="process-number">03.</span>
            <p><strong>Validació:</strong><br>Escoltem el teu feedback i ajustem el disseny segons calgui.</p>
          </div>

          <!-- Card 4 -->
          <div class="process-card step-4">
            <span class="process-number">04.</span>
            <p><strong>Programació:</strong><br>Convertim el disseny en una web funcional, optimitzada i adaptada.</p>
          </div>

          <!-- Card 5 -->
          <div class="process-card step-5">
            <span class="process-number">05.</span>
            <p><strong>Revisió final:</strong><br>Verifiquem disseny, contingut, navegació, idiomes i funcionalitats.</p>
          </div>

          <!-- Card 6 -->
          <div class="process-card step-6">
            <span class="process-number">06.</span>
            <p><strong>Entrega:</strong><br>Publiquem la web a la xarxa, facilitem els accessos i la formació bàsica.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- TEAM -->
    <section id="team" class="section-light">
      <div class="container">
        <h1 class="section-title">El nostre equip</h1>

          <div class="team-grid">
            <!-- Tarjeta 1 -->
            <div class="team-card">
              <div class="team-front">
                <img src="img/Perfil-Marc.png" alt="Marc Duran" class="team-photo">
                <h3 class="team-name">Marc Duran Llauger</h3>
              </div>
              <div class="team-back">
                <h3 class="team-name">Marc Duran Llauger</h3>
                <p>Mirada estratègica orientada a resultats. És qui s'encarrega que la teva web no només es vegi bé, sinó que funcioni.</p>
                <ul>
                  <li>Màster en Màrqueting Digital per ESIC.</li>
                  <li>Més de 8 anys d'experiència en el sector digital.</li>
                  <li>SEO, SEM i copywriting.</li>
                </ul>
              </div>
            </div>


            <!-- Tarjeta 2 -->
            <div class="team-card">
              <div class="team-front">
                <img src="img/foto perfil.JPG" alt="Javier Ribas Pascual" class="team-photo">
                <h3 class="team-name">Javi Ribas Pascual</h3>
              </div>
              <div class="team-back">
                <h3 class="team-name">Javi Ribas Pascual</h3>
                <p>Creativitat enfocada en crear i millorar productes digitals. Responsable de dissenyar i desenvolupar webs, softwares i aplicacions.</p>
                <ul>
                  <li>Programador (Especialista en JS, Node.JS, html i css).</li>
                  <li>Màster en UX/UI per Neoland.</li>
                  <li>Advocat per la UOC.</li>
                </ul>
              </div>
            </div>
          </div>
        </section>
      </div>
    </section>

    <!-- FOOTER -->
    <footer id="footer">
      <div class="container">
        <!-- Vídeo de fons reutilitzat (mateixos assets que el HERO) -->
        <video
          id="footer-video"
          autoplay
          muted
          loop
          playsinline
          preload="auto"
          poster="img/hero-poster.jpg"
        >
          <source src="img/hero-gradient.webm" type="video/webm" />
          <source src="img/hero-gradient.mp4"  type="video/mp4" />
          <img src="img/hero-poster.jpg" alt="Fons animat" />
        </video>

        <!-- Contingut superposat -->
        <div id="footer-content" class="container">
          <h1 id="footer-title">Encara tens dubtes?</h1>

          <p id="footer-contact">
            Truca'ns al <strong>662 58 71 79</strong><br />
            Escriu-nos directament al <strong>WhatsApp</strong><br />
            Envia'ns un correu a <strong>reformesdigitals@gmail.com</strong>
          </p>

          <a id="footer-left" href="cookies.html">Avís legal i Política de cookies</a>
          <p id="footer-right">Reformes Digitals © 2025</p>
        </div>
      </div>
    </footer>

  </body>
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script>
(async () => {
  // === Config de esta página (CA) ===
  const BASE = '/content/home/ca'; // en index-cast.html usa '/content/home/es'

  async function get(path) {
    const r = await fetch(path, { cache: 'no-store' });
    return r.ok ? r.text() : '';
  }

  // ------- NAV (opcional si quieres cargarlo desde MD) -------
  // (si no lo necesitas, puedes omitir esta parte)
  try {
    const navRaw = await get(`${BASE}/nav.md`);
    const fm = navRaw.match(/^---\n([\s\S]*?)\n---/);
    if (fm) {
      const yml = fm[1];
      const logoM = yml.match(/logo:\s*(.+)/);
      const navLogo = document.getElementById('nav-logo');
      if (navLogo && logoM) {
        const logo = logoM[1].trim().replace(/^"|"$/g, '');
        // Si subes el logo desde el admin, vendrá así: /assets/uploads/xxxx.png
        navLogo.src = logo.startsWith('/assets/') ? logo : `/src/${logo.replace(/^\.?\//,'')}`;
      }
      const links = [...yml.matchAll(/-\s*{\s*label:\s*"(.*?)",\s*href:\s*"(.*?)"\s*}/g)]
        .map(m => ({ label: m[1], href: m[2] }));
      const ul = document.getElementById('nav-menu');
      const dropdown = document.getElementById('nav-item-idioma');
      if (ul && links.length) {
        ul.innerHTML = '';
        links.forEach(l => {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = l.href; a.textContent = l.label;
          li.appendChild(a); ul.appendChild(li);
        });
        if (dropdown) ul.appendChild(dropdown);
      }
    }
  } catch(e) { console.warn('NAV MD load error', e); }

  // ------- HERO -------
  {
    const md = await get(`${BASE}/hero.md`);
    const lines = md.split('\n');
    const h1 = lines.find(l => l.startsWith('# '));
    const body = md.replace(/^# .*\n?/, '');
    const titleEl = document.getElementById('hero-title');
    const descEl  = document.getElementById('hero-description');
    if (titleEl && h1) titleEl.textContent = h1.replace(/^#\s*/, '');
    if (descEl) descEl.innerHTML = marked.parse(body);
  }

  // ------- ABOUT (añadimos clase a los UL) -------
  {
    const md = await get(`${BASE}/about.md`);
    const aboutBox = document.querySelector('#about .about-box');
    if (aboutBox) {
      aboutBox.innerHTML = marked.parse(md);
      // Cualquier lista dentro de About tendrá el estilo antiguo
      aboutBox.querySelectorAll('ul').forEach(ul => ul.classList.add('about-services'));
    }
  }

  // ------- PROCESO -> tarjetas (recupera tu maquetación original) -------
  // Lee la lista del MD (guiones) y crea las .process-card
  {
    const md = await get(`${BASE}/process.md`);
    const container = document.querySelector('#process .container');
    const grid = container.querySelector('.process-grid');
    const titleNode = container.querySelector('.section-title');
    const descNode  = container.querySelector('.section-description');

    // título (primera línea con #)
    const tMatch = md.match(/^#\s+(.+)$/m);
    if (titleNode && tMatch) {
      titleNode.innerHTML = tMatch[1]; // permite <br> si lo pusiste en el MD
    }

    // descripción: líneas tras el título hasta la primera lista
    const afterTitle = md.split('\n').slice(md.split('\n').findIndex(l => /^#\s+/.test(l)) + 1);
    const listStart  = afterTitle.findIndex(l => /^\s*-\s/.test(l));
    const descLines  = listStart > -1 ? afterTitle.slice(0, listStart) : afterTitle;
    if (descNode) descNode.innerHTML = marked.parse(descLines.join('\n'));

    // items de la lista
    const listLines = md.split('\n').filter(l => /^\s*-\s/.test(l));
    if (grid) {
      grid.innerHTML = ''; // limpia grid antiguo
      listLines.forEach((raw, i) => {
        // Formato esperado en MD: - **01. Título:** Texto...
        const m = raw.match(/-\s*\*\*(\d+)\.\s*(.*?)\*\*:\s*(.*)$/);
        const num = m ? m[1] : String(i + 1).padStart(2, '0');
        const title = m ? m[2] : '';
        const text  = m ? m[3] : raw.replace(/^\s*-\s*/, '');

        const card = document.createElement('div');
        card.className = `process-card step-${i + 1}`;
        card.innerHTML = `
          <span class="process-number">${num}.</span>
          <p>${title ? `<strong>${title}</strong><br>` : ''}${text}</p>
        `;
        grid.appendChild(card);
      });
    }
  }

  // ------- EQUIPO (corrige rutas de imagen) -------
  async function applyMember(slug, index) {
    const md = await get(`${BASE}/team/${slug}.md`);
    if (!md) return;
    let body = md;
    let name = '', photo = '';
    const fm = md.match(/^---\n([\s\S]*?)\n---/);
    if (fm) {
      const y = fm[1];
      const n = y.match(/name:\s*"(.*)"/);
      const p = y.match(/photo:\s*"(.*)"/);
      if (n) name  = n[1];
      if (p) photo = p[1];
      body = md.replace(/^---[\s\S]*?---\n?/, '');
    }
    const cards = document.querySelectorAll('#team .team-card');
    const card  = cards[index];
    if (!card) return;

    const frontImg = card.querySelector('.team-front img.team-photo');
    const frontName= card.querySelector('.team-front .team-name');
    const backName = card.querySelector('.team-back  .team-name');
    const backBox  = card.querySelector('.team-back');

    // FOTO: si viene de Decap => /assets/uploads/... úsala tal cual
    // si es del repo /src/img => completa con /src/
    const resolved = photo.startsWith('/assets/')
      ? photo
      : `/src/${photo.replace(/^\.?\//,'')}`;

    if (frontImg && photo) frontImg.src = resolved;
    if (frontName && name) frontName.textContent = name;
    if (backName && name)  backName.textContent  = name;

    if (backBox) {
      const html = marked.parse(body);
      const p = backBox.querySelector('p'); if (p) p.remove();
      const ul= backBox.querySelector('ul'); if (ul) ul.remove();
      const div = document.createElement('div');
      div.innerHTML = html;
      backBox.appendChild(div);
    }
  }

  await applyMember('marc',   0);
  await applyMember('javier', 1);

  // ------- FOOTER -------
  {
    const md = await get(`${BASE}/footer.md`);
    const footerBox = document.getElementById('footer-content');
    if (footerBox) footerBox.innerHTML = marked.parse(md);
  }
})();
</script>

</html>
